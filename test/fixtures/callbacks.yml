# Read about fixtures at http://api.rubyonrails.org/classes/ActiveRecord/FixtureSet.html

one:
  name: apply_subscription_order_discount
  description: Apply discounts to subscription orders
  url: https://example.com/discount-callback
  timeout_in_seconds: 30
  example_response:
    apply_discount: true
    discount:
      type: percentage
      amount: 10
  request_schema:
    type: object
    properties:
      id:
        type: integer
        description: Subscription ID
      order_number:
        type: string
        description: Order number
      amount:
        type: number
        description: Order amount
      currency_code:
        type: string
        description: Currency code
    required:
      - id
      - amount
      - currency_code
  response_schema:
    type: object
    properties:
      apply_discount:
        type: boolean
        description: Whether to apply a discount
      discount:
        type: object
        properties:
          type:
            type: string
            enum:
              - percentage
              - flat
            description: Type of discount to apply
          amount:
            type: number
            description: Amount of discount to apply
        required:
          - type
          - amount
    required:
      - apply_discount
  active: true

two:
  name: validate_customer_data
  description: Validate customer information before processing
  url: https://example.com/validate-customer
  timeout_in_seconds: 60
  example_response:
    valid: true
    errors: []
    warnings:
      - email_domain_uncommon
  request_schema:
    type: object
    properties:
      customer:
        type: object
        properties:
          email:
            type: string
            format: email
          name:
            type: string
          phone:
            type: string
    required:
      - customer
  response_schema:
    type: object
    properties:
      valid:
        type: boolean
        description: Whether the customer data is valid
      errors:
        type: array
        items:
          type: string
        description: List of validation errors
      warnings:
        type: array
        items:
          type: string
        description: List of validation warnings
    required:
      - valid
      - errors
      - warnings
  active: false
