import{D as e}from"./p-B7Yk6rNY.js";import{G as o,k as t}from"./p-C4wedjxV.js";import{S as a}from"./p-BG3D11hv.js";import{P as r}from"./p-D9lurr2W.js";import{R as i}from"./p-DNmQi9H5.js";import{z as l,W as n,B as s,w as d,Y as p,U as u,L as b,v as m,k as c,E as f,M as g,m as F,a as y}from"./p-CKrqpXF-.js";import"./p-BwPuT_aN.js";import{c as x}from"./p-BvW5kj19.js";import{r as h}from"./p-BIFnrNPV.js";import"./p-BpMJ0iVV.js";import"./p-CBK12GNN.js";import"./p-DgA2OfDc.js";import"./p-BcYWNS4N.js";import"./p-DUIxdZrE.js";const C={brand:{primary:"#6778DE",secondary:"#FF997C"},charts:{colors:["#6778DE","#FF997C","#9EA4F4","#B8B8D1","#FF6B6C","#FFC145","#9DC7FF","#FF805B","#CD9FFF","#E6DEDE","#FFA6A6","#FFD98D"],options:{toolTipEnabled:true,usePointStyle:true},fontWeights:{description:400,kpiNumber:700,pagination:400,title:700},textJustify:"start",bar:{borderRadius:4,borderSkipped:"bottom",borderWidth:0,cubicInterpolationMode:"default",font:{size:12},labels:{total:{backgroundColor:"#ffffff",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}},value:{backgroundColor:"transparent",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}}},lineTension:.1},bubble:{font:{size:12},labels:{backgroundColor:"#ffffff",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}}},kpi:{alignment:"center",font:{negativeColor:"#FF6B6C",size:32}},line:{cubicInterpolationMode:"default",font:{size:12},labels:{backgroundColor:"transparent",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}},lineTension:.1},pie:{borderColor:"#FFFFFF",borderWidth:2,font:{size:12},labels:{backgroundColor:"#ffffff",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}},weight:5},scatter:{font:{size:12},labels:{backgroundColor:"#ffffff",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}}},stackedArea:{cubicInterpolationMode:"default",font:{size:12},labels:{backgroundColor:"#ffffff",borderRadius:8,color:"#888888",font:{size:12,weight:"normal"}},lineTension:.1}},container:{backgroundColor:"transparent",border:"1px solid #ddd",borderRadius:"12px",boxShadow:"none",padding:"15px"},controls:{backgrounds:{colors:{heavy:"#D1D5DB",normal:"#F3F4F6",soft:"#FFFFFF",transparent:"transparent"}},buttons:{active:{background:"#FFFFFF",border:"#D1D5DB",fontColor:"#000"},hovered:{background:"#FFFFFF",border:"#A1A5AA",fontColor:"#000"},pressed:{background:"#F3F3F4",border:"#D1D5DB",fontColor:"#000"},fontSize:"14px",height:"50px",multiSelect:{active:{background:"#6778DE",border:"1px solid #5062c9",fontColor:"#FFFFFF"},inactive:{background:"#F3F4F6",border:"1px solid #ffffff",fontColor:"#333942"},margin:"0px 4px 4px 4px",maxWidth:"150px",padding:"4px 8px",radius:"9999px"},paddingY:"16px",paddingX:"32px",radius:"9999px"},borders:{colors:{normal:"#DADCE1",heavy:"D1D5DB"},padding:8,radius:"12px"},datepicker:{backgrounds:{colors:{accent:"#f3f4f6",rangeEnd:"#7d899b",rangeEndDate:"#7d899b",rangeMiddle:"#f3f4f6",rangeStart:"#7d899b"}},font:{colors:{accent:"#7d899b",rangeEnd:"#ffffff",rangeMiddle:"#7d899b",rangeStart:"#ffffff",rangeStartDate:"#7d899b",today:"#111111"}},outsideOpacity:.4,radiuses:{button:"4px",buttonEnd:"0px 4px 4px 0px",buttonStart:"4px 0px 0px 4px",weekNumber:"4px"}},inputs:{colors:{hover:"#F3F4F6",selected:"#F3F4F6"}},skeletonBox:{animation:"shimmer 2s infinite",backgroundImage:`linear-gradient(\n        90deg,\n        rgba(255, 255, 255, 0) 0,\n        rgba(255, 255, 255, 0.2) 20%,\n        rgba(255, 255, 255, 0.5) 60%,\n        rgba(255, 255, 255, 0)\n      );`},tooltips:{radius:"4px"}},dateFormats:{year:"yyyy",quarter:"MMM yy",month:"MMM yy",day:"d MMM",week:"d MMM",hour:"eee HH:mm",minute:"eee HH:mm",second:"HH:mm:ss"},downloadMenu:{backgroundColor:"#FFFFFF",border:"0px solid #EEEEEE",borderRadius:"4px",boxShadow:"0 4px 6px -1px rgb(0,0,0,0.1), 0 2px 4px -2px rgb(0,0,0,0.1)",font:{color:"#BBBBBB",family:'-apple-system, "system-ui", "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',size:"14px",weight:300},hover:{backgroundColor:"#FFFFFF",fontColor:"#888888",svgColor:"#888888"},paddingOuter:0,paddingInner:".5rem",svg:{width:"24px",height:"24px"}},font:{color:"#888888",colorNormal:"#333942",colorSoft:"#e3e3e3",description:{color:"#888888",size:"14px",family:'-apple-system, "system-ui", "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},family:'-apple-system, "system-ui", "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',size:"14px",weight:400,title:{color:"#333942",size:"16px",family:'-apple-system, "system-ui", "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},urls:[]},png:{backgroundColor:"#FFFFFF"},svg:{fillBkg:"#FFFFFF",fillNormal:"#474752",fillStrong:"#1D1E22",strokeSoft:"#474752",strokeNormal:"#959CA8",strokeStrong:"#101010"}};d.register(p,u,b,m,c,f,g,F,y);const v=e=>{var o;const n=t();let s=n.charts.colors;n.charts.bubble.colors&&(s=n.charts.bubble.colors);const{fillGaps:d}=i(e,"desc"),{results:p}=e,u=e.isTimeDimension?(o=p==null?void 0:p.data)==null?void 0:o.reduce(d,[]):p==null?void 0:p.data,b={...e,theme:n},m=k(b,u,s);return a.jsx(r,{...e,className:"overflow-y-hidden",children:a.jsx(l,{height:"100%",options:D(b,u,m),data:m})})};function D(e,o,t){var a,r,i,l;let{theme:d}=e;d||(d=C),n(d,"bubble");const p=t.datasets[0].data,u=e.reverseXAxis?e.isTimeDimension?(a=p[0])==null?void 0:a.r:(r=p==null?void 0:p[p.length-1])==null?void 0:r.r:e.isTimeDimension?(i=p[p.length-1])==null?void 0:i.r:(l=p==null?void 0:p[0])==null?void 0:l.r,b=p.reduce(((e,o)=>(o==null?void 0:o.y)>(e==null?void 0:e.y)?o:e),p[0]),m=(b==null?void 0:b.r)||0;return{responsive:true,maintainAspectRatio:false,animation:{duration:400,easing:"linear"},scales:{y:{min:e.yAxisMin,grid:{display:false},afterDataLimits:function(o){s(o,e.results,[e.yAxis],e.dps)},ticks:{padding:u},title:{display:!!e.yAxisTitle,text:e.yAxisTitle}},x:{reverse:e.reverseXAxis,type:e.isTimeDimension?"time":"category",time:{round:e.granularity,isoWeekday:true,displayFormats:d.dateFormats,unit:e.granularity},grid:{display:false},title:{display:!!e.xAxisTitle,text:e.xAxisTitle}}},layout:{padding:{left:0,right:0,top:m+(e.showLabels?30:0),bottom:0}},plugins:{datalabels:{display:e.showLabels?"auto":false,anchor:"end",align:"end",backgroundColor:d.charts.bubble.labels.backgroundColor,borderRadius:d.charts.bubble.labels.borderRadius,color:d.charts.bubble.labels.color,font:{size:d.charts.bubble.labels.font.size,weight:d.charts.bubble.labels.font.weight},formatter:(t,{dataIndex:a})=>{const r=(o==null?void 0:o[a][e.bubbleSize.name])||0;return x(r,{type:"number",dps:e.dps||0,meta:e.bubbleSize.meta})||null}},tooltip:{callbacks:{label:function(t){const a=t.dataset.label||"",r=t.raw,i=x(`${r.y||""}`,{type:"number",dps:e.dps,meta:e.yAxis.meta}),l=e.bubbleSize.title,n=(o==null?void 0:o[t.dataIndex][e.bubbleSize.name])||0,s=x(n,{type:"number",dps:e.dps,meta:e.bubbleSize.meta});return[`${a}: ${i}`,`${l}: ${s}`]}}},legend:{display:e.showLegend,position:"bottom",labels:{usePointStyle:true,boxHeight:10}}}}}function k(e,o,t){const a=(o==null?void 0:o.map((o=>{const t=o[e.bubbleSize.name];return t?parseFloat(t):0})))||[],r=30/Math.max(...a),i=(o==null?void 0:o.map((o=>({x:o[e.xAxis.name],y:parseFloat(o[e.yAxis.name])||0,r:(parseFloat(o[e.bubbleSize.name])||0)*r}))))||[];return{datasets:[{label:e.yAxis.title,data:i,backgroundColor:h(t[0],.8)}]}}const S={name:"BubbleChart",label:"Bubble chart",classNames:["inside-card"],category:"Charts: essentials",inputs:[{name:"ds",type:"dataset",label:"Dataset",description:"Dataset",defaultValue:false,category:"Chart data"},{name:"xAxis",type:"dimension",label:"X-Axis",config:{dataset:"ds",hideGranularity:true},category:"Chart data"},{name:"yAxis",type:"measure",label:"Y-Axis",config:{dataset:"ds"},category:"Chart data"},{name:"bubbleSize",type:"measure",label:"Bubble Size",config:{dataset:"ds"},category:"Chart data"},{name:"limit",type:"number",label:"Limit results",category:"Chart data"},{name:"granularity",type:"granularity",label:"Granularity",defaultValue:"week",category:"Variables to configure"},{name:"title",type:"string",label:"Title",description:"The title for the chart",category:"Chart settings"},{name:"description",type:"string",label:"Description",description:"The description for the chart",category:"Chart settings"},{name:"showLegend",type:"boolean",label:"Show Legend",category:"Chart settings",defaultValue:true},{name:"showLabels",type:"boolean",label:"Show Labels",category:"Chart settings",defaultValue:false},{name:"reverseXAxis",type:"boolean",label:"Reverse X Axis",category:"Chart settings",defaultValue:false},{name:"xAxisTitle",type:"string",label:"X-Axis Title",category:"Chart settings"},{name:"yAxisTitle",type:"string",label:"Y-Axis Title",category:"Chart settings"},{name:"yAxisMin",type:"number",label:"Y-Axis minimum value",category:"Chart settings"},{name:"dps",type:"number",label:"Decimal Places",category:"Formatting"},{name:"enableDownloadAsCSV",type:"boolean",label:"Show download as CSV",category:"Export options",defaultValue:true},{name:"enableDownloadAsPNG",type:"boolean",label:"Show download as PNG",category:"Export options",defaultValue:true}]},A=o(v,S,{props:o=>{var t;const a=[];a.push({property:o.xAxis,direction:"desc"});const r=o.xAxis.nativeType==="time";return{...o,reverseXAxis:o.reverseXAxis,isTimeDimension:r,results:r?e({from:o.ds,orderBy:a,select:[{dimension:(t=o.xAxis)==null?void 0:t.name,granularity:o.granularity},o.yAxis,o.bubbleSize],limit:o.limit||50}):e({from:o.ds,select:[o.xAxis,o.yAxis,o.bubbleSize],limit:o.limit||50})}}});export{A as default,S as meta};
//# sourceMappingURL=p-B8ki0jN9.js.map