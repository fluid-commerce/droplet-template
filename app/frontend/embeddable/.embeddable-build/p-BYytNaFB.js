import{S as e}from"./p-BG3D11hv.js";import{D as l}from"./p-BpMJ0iVV.js";import{c as n}from"./p-BvW5kj19.js";import{v as t,P as r}from"./p-D9lurr2W.js";import{k as i}from"./p-C4wedjxV.js";const o=o=>{var d,a,c,p,m,u,v,f;const{results:h,prevResults:x,prevTimeFilter:$,metric:b,displayMetric:w,dimension:N,dps:y,prefix:g,suffix:j,showPrevPeriodLabel:M}=o,z=i(),{n:B,percentage:C}=l.useMemo((()=>{var e,l,t,r,i;if(N||!(b!=null&&b.name)||!((e=h==null?void 0:h.data)!=null&&e.length))return{percentage:null,n:null};const o=parseFloat(((t=(l=h==null?void 0:h.data)==null?void 0:l[0])==null?void 0:t[b.name])||0),s=parseFloat(((i=(r=x==null?void 0:x.data)==null?void 0:r[0])==null?void 0:i[b.name])||0);return{percentage:s||s===0?Math.round(o/s*100)-100:null,n:n(o.toString(),{type:"number",meta:b==null?void 0:b.meta,dps:y})}}),[h,x,b,y,N]),S=o.fontSize||z.charts.kpi.font.size,k=Math.max(S/3,parseInt(z.font.size.replace("px",""),10)),D=z.font.colorNormal,F=z.charts.kpi.font.negativeColor;return h!=null&&h.error?e.jsxs("div",{className:"h-full flex items-center justify-center font-embeddable text-sm",children:[e.jsx(t,{}),e.jsx("div",{className:"whitespace-pre-wrap p-4 max-w-sm text-xs",children:h==null?void 0:h.error})]}):e.jsx(r,{...o,className:"overflow-y-hidden",children:e.jsx("div",{className:`\n          flex\n          flex-col\n          font-embeddable\n          h-full\n          items-${((d=z.charts.kpi)==null?void 0:d.alignment)||"center"}\n          justify-center\n          leading-tight\n          relative\n          text-${((a=z.charts.kpi)==null?void 0:a.alignment)||"center"}\n          font-[--embeddable-charts-fontWeights-kpiNumber]\n        `,children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[color:--embeddable-font-colorNormal]",style:{fontSize:`${S}px`},children:e.jsx("p",{children:(p=(c=h==null?void 0:h.data)==null?void 0:c[0])==null?void 0:p[N.name]})}),w&&b&&e.jsx("p",{className:"font-normal",style:{fontSize:`${k}px`,color:D},children:`${b.title}: ${n(`${(u=(m=h==null?void 0:h.data)==null?void 0:m[0])==null?void 0:u[b.name]}`,{type:"number",dps:y,meta:b==null?void 0:b.meta})}\n                `})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[color:--embeddable-font-colorNormal]",style:{fontSize:`${S}px`},children:e.jsx("p",{children:`${g||""}${B||0}${j||""}`})}),($==null?void 0:$.to)&&e.jsxs("div",{className:`\n                  flex\n                  flex-wrap\n                  font-normal\n                  items-${((v=z.charts.kpi)==null?void 0:v.alignment)||"center"}\n                  justify-center\n                  text-${((f=z.charts.kpi)==null?void 0:f.alignment)||"center"}\n                `,style:{color:C&&C<0?F:D,fontSize:`${k}px`},children:[e.jsx(s,{className:`${C&&C<0?"rotate-180":""} h-[20px] w-[9px] min-w-[9px] mr-1.5`}),e.jsx("span",{children:C===1/0?"∞":`${n(`${Math.abs(C||0)}`,{type:"number",dps:y})}%`}),M&&($==null?void 0:$.relativeTimeString)&&$.relativeTimeString.length>0&&e.jsxs("span",{style:{color:D},children:[" ",`vs ${$.relativeTimeString}`]})]})]})})})},s=({className:l})=>e.jsx("svg",{className:l||"",width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7.14028 0.753268C7.5422 0.0998221 8.4578 0.099822 8.85972 0.753268L15.8366 12.0964C16.2727 12.8054 15.7846 13.7369 14.9769 13.7369H1.02308C0.215416 13.7369 -0.272737 12.8054 0.163359 12.0964L7.14028 0.753268Z",fill:"currentcolor"})});export{o as A};
//# sourceMappingURL=p-BYytNaFB.js.map